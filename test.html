<html >
<head>
<meta charset="utf-8" />
</head>
<body>
<!-- <canvas id="snakeCanvas" height="1000px" width="1000px"> -->


<div id="test" style="width:1px;height:17px;background:#0f0;">0%</div>
<input type="button" value="Run" id="run"/>


<script>
var canvas = document.getElementById('snakeCanvas');
var R=100;
var X=120;
var Y=120;
//极坐标画圆
function draw() {
  canvas.getContext('2d').clearRect(0,0,1000,1000);
  if (canvas.getContext){
    var ctx = canvas.getContext('2d');
    ctx.beginPath();
    
    for(var i=0;i<Math.PI*2;i+=0.01){
        ctx.moveTo(R*Math.cos(i-0.01)+X,R*Math.sin(i-0.01)+Y);
        ctx.lineTo(R*Math.cos(i)+X,R*Math.sin(i)+Y)
        ctx.stroke(); 
    }
           
  }
}

// draw();

window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
var start = null;
var ele = document.getElementById("test");
var progress = 0;

function step(timestamp) {
    progress += 1;
    ele.style.width = progress + "%";
    ele.innerHTML=progress + "%";
    if (progress < 100) {
        requestAnimationFrame(step);
    }
}
requestAnimationFrame(step);
document.getElementById("run").addEventListener("click", function() {
    ele.style.width = "1px";
    progress = 0;
    requestAnimationFrame(step);
}, false);
</script>

</body>
</html>